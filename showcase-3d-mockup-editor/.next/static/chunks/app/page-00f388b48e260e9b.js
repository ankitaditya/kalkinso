(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5013:function(e){function t(e){return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=5013,e.exports=t},6968:function(e,t,a){Promise.resolve().then(a.bind(a,912)),Promise.resolve().then(a.bind(a,1481)),Promise.resolve().then(a.bind(a,8032))},8032:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var r,n,o,s,l=a(7437),i=a(5854),c=a.n(i),p=()=>(0,l.jsx)("div",{className:c().spinner,"data-cy":"loading-spinner"}),d=a(6800),u=a.n(d),m=a(7354),f=a.n(m),g=e=>{let{options:t,value:a,name:r,label:n,buttonStyle:o,onChange:s,size:i="sm"}=e,c=e=>r+e.value;return(0,l.jsxs)("div",{className:f().wrapper,children:[n&&(0,l.jsx)("span",{className:f().description,children:n}),(0,l.jsx)("div",{className:f().optionWrapper,children:t.map(e=>{let t=e.value===a;return(0,l.jsx)("button",{style:o,className:u()(f().labelWrapper,f()["labelWrapper--"+i],{[f().labelWrapperActive]:t}),onClick:()=>!t&&s(e.value),children:e.label},c(e))})})]})},h=a(5611),b=a(2265),_=a(116),v=a.n(_),C=a(4410);function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var k=e=>C.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),r||(r=C.createElement("path",{stroke:"#121A21",strokeLinecap:"square",strokeLinejoin:"round",strokeOpacity:.9,d:"M12.5 9.5v3h-3M6.5 3.5h-3v3",opacity:.75})),n||(n=C.createElement("path",{fill:"#121A21",fillOpacity:.9,fillRule:"evenodd",d:"M6.5 14H7v-1H4.06l2.97-2.97-1.06-1.06L3 11.94V9H2v4.5a.5.5 0 0 0 .5.5zM14 6.5V7h-1V4.06l-2.97 2.97-1.06-1.06L11.94 3H9V2h4.5a.5.5 0 0 1 .5.5zM13 3",clipRule:"evenodd"})));function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var j=e=>C.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),o||(o=C.createElement("path",{stroke:"#121A21",strokeLinecap:"square",strokeLinejoin:"round",strokeOpacity:.9,d:"M14.5 17.5v-3h3M6.5 9.5h3v-3",opacity:.75})),s||(s=C.createElement("path",{fill:"#121A21",fillOpacity:.9,fillRule:"evenodd",d:"M17.5 11h.5v-1h-2.94l2.97-2.97-1.06-1.06L14 8.94V6h-1v4.5a.5.5 0 0 0 .5.5zM11 17.5v.5h-1v-2.94l-2.97 2.97-1.06-1.06L8.94 14H6v-1h4.5a.5.5 0 0 1 .5.5zM10 14",clipRule:"evenodd"})));a(1187);let N=e=>{let{imageUrl:t,modelUrl:a,baseColorTextureIndex:r,cameraOrbit:n="160deg 90deg"}=e,o=(0,b.useRef)(),[s,i]=(0,b.useState)(!1);return(0,b.useEffect)(()=>{(async()=>{let e=o.current;if(!e||!e.model)return;let a=e.model.materials[r],n=await e.createTexture(t);a.pbrMetallicRoughness.baseColorTexture.setTexture(n)})()},[r,t]),(0,b.useEffect)(()=>{let e=o.current;e.addEventListener("load",async()=>{let a=e.model.materials[r],o=await e.createTexture(t);a.pbrMetallicRoughness.baseColorTexture.setTexture(o),e.cameraOrbit=n,e.cameraControls=!0,i(!0)})},[a,t,r,n]),(0,l.jsx)("model-viewer",{ref:o,src:a,style:{width:"100%",height:"100%"},"camera-controls":!0,"shadow-intensity":"1","data-cy":s?"mockup-3d-canvas":"mockup-3d-canvas-loading",children:(0,l.jsx)("div",{className:"progress-bar hide",slot:"progress-bar",children:(0,l.jsx)("div",{className:"update-bar"})})})};var y=a(3066);function S(e){let{config:t,configure:a,onInstanceChange:r,...n}=e,o=(0,b.useRef)(null);return(0,b.useEffect)(()=>{if(!o.current)return;let e=o.current,n=null,s=!1;return y.ZP.create(e,null!=t?t:{}).then(async e=>{if(s){e.dispose();return}n=e,a&&await a(n),r&&r(n)}),()=>{s=!0,null==n||n.dispose(),n=null,r&&r(void 0)}},[o,t,a,r]),(0,l.jsx)("div",{ref:o,...n})}let O=b.useMemo,W=b.useCallback,T=b.useState,M=b.useState,F={businesscard:{label:"Business Card",assetsFolderName:"business-card",sceneTitle:"Business Card Design",baseColorTextureIndex:0,cameraOrbit:"160deg 90deg"},cap:{label:"Baseball Cap",assetsFolderName:"cap",sceneTitle:"Baseball Cap Design",baseColorTextureIndex:0,cameraOrbit:"160deg 90deg"},apparel:{label:"Apparel",assetsFolderName:"t-shirt",sceneTitle:"T-Shirt Design",baseColorTextureIndex:1,cameraOrbit:"0deg 90deg"},hoodie:{label:"Hoodie",assetsFolderName:"hoodie",sceneTitle:"Hoodie Design",baseColorTextureIndex:1,cameraOrbit:"0deg 90deg",fileName:"hoodie.glb"},hoodieFuture:{label:"Hoodie Future",assetsFolderName:"hoodie-future",sceneTitle:"Hoodie Design",baseColorTextureIndex:1,cameraOrbit:"0deg 90deg",fileName:"hoodie-future.glb"},hoodieMajestic:{label:"Hoodie Majestic",assetsFolderName:"hoodie-majestic",sceneTitle:"Hoodie Majestic",baseColorTextureIndex:1,cameraOrbit:"0deg 90deg",fileName:"hoodie-majestic.glb"},hoodieMindfull:{label:"Hoodie Mindfull",assetsFolderName:"hoodie-mindful",sceneTitle:"Hoodie Mindfull",baseColorTextureIndex:1,cameraOrbit:"0deg 90deg",fileName:"hoodie-mindfull.glb"}},E="".concat("https://apparels.kalkinso.com").concat("","/cases/3d-mockup-editor/1x1-ffffffff.png"),L=(e,t,a)=>{e.block.findByName(t).forEach(t=>{let r=e.block.getFill(t);e.block.setString(r,"fill/image/imageFileURI",a),e.block.resetCrop(t)})};var I=()=>{let[e,t]=M(),[a,r]=T(),[n,o]=(0,b.useState)(),[s,i]=(0,b.useState)(""),[c,d]=(0,b.useState)(!0),[m,f]=(0,b.useState)(!1),[_,C]=(0,b.useState)(!1),[x,w]=(0,b.useState)(!0),y=new URLSearchParams(window.location.search).get("c_product")||"apparel",[I,R]=(0,b.useState)(y),U=(0,b.useRef)(I);(0,b.useEffect)(()=>{U.current=I},[I]),(0,b.useEffect)(()=>{let e=new URLSearchParams(window.location.search);e.set("c_product",I),window.history.pushState({},"","".concat(window.location.pathname,"?").concat(e))},[I]);let H=(0,b.useMemo)(()=>F[I],[I]);(0,b.useEffect)(()=>{let e;let a=!1;return h.ZP.init({license:"X5vxMMqS6wAzpWIk0cXhaQyvj5kx5NhrjbBWnFy05sh5UzCa6mKimNKT2FoFaFvP"}).then(async r=>{if(a){r.dispose();return}e=r,t(r)}),()=>{a=!0,e&&(e.dispose(),t(void 0))}},[t]);let B=(0,b.useCallback)(async()=>{if(m)return;f(!0),d(!0),await new Promise(e=>setTimeout(e,0));let t=[];for(let e of a.engine.block.findByType("page"))t=[...t,await a.engine.block.export(e,"image/png",{targetWidth:1048,targetHeight:1048})];n?await e.scene.loadFromString(n):await e.scene.loadFromURL("".concat("https://apparels.kalkinso.com").concat("","/cases/3d-mockup-editor/").concat(H.assetsFolderName,"/textures/Material_baseColor.scene"));for(let a=t.length;a<=10;a++)L(e,"Image ".concat(a+1),E);t.forEach((t,a)=>{L(e,"Image ".concat(a+1),URL.createObjectURL(t))});let r=e.scene.get(),s=await e.scene.saveToString(),l=await e.block.export(r,"image/jpeg");d(!1),f(!1),U.current===I&&(w(!1),o(s),i(URL.createObjectURL(l)))},[n,a,e,H]);(0,b.useEffect)(()=>{let t=setInterval(()=>{a&&x&&e&&B()},1500);return()=>clearInterval(t)},[x,a,e,B]);let D=O(()=>({license:"X5vxMMqS6wAzpWIk0cXhaQyvj5kx5NhrjbBWnFy05sh5UzCa6mKimNKT2FoFaFvP",role:"Adopter",callbacks:{onExport:"download",onUpload:"local"},ui:{elements:{navigation:{title:H.sceneTitle,action:{export:{show:!0,format:["image/png","application/pdf"]}}},panels:{settings:!0}}}}),[H]),P=W(async e=>{await e.addDefaultAssetSources(),await e.addDemoAssetSources({sceneMode:"Design"}),e.ui.setDockOrder([...e.ui.getDockOrder().filter(e=>{let{key:t}=e;return"ly.img.template"!==t})]),e.engine.editor.setSettingBool("page/title/show",!1),e.loadFromURL("".concat("https://apparels.kalkinso.com").concat("","/cases/3d-mockup-editor/").concat(H.assetsFolderName,"/design.scene"))},[H]);return(0,b.useEffect)(()=>{if(!a)return;let e=a.engine.editor.onHistoryUpdated(()=>{w(!0)});return()=>{e()}},[a]),(0,b.useEffect)(()=>{I&&(d(!0),o())},[I]),(0,l.jsxs)("div",{className:v().outerWrapper,children:[(0,l.jsx)("div",{className:v().productsWrapper,children:(0,l.jsx)(g,{options:Object.entries(F).map(e=>{let[t,{label:a}]=e;return{label:a,value:t}}),value:I,name:"product",onChange:e=>{R(e),i("")},size:"md"})}),(0,l.jsxs)("div",{className:v().wrapper,children:[(0,l.jsx)("div",{className:v().smokeScreen,style:{visibility:_?"visible":"hidden",opacity:_?"1":"0"}}),(0,l.jsx)("div",{className:u()({[v().fullscreenMockupCenter]:_}),onClick:e=>{_&&e.target===e.currentTarget&&C(!1)},children:(0,l.jsxs)("div",{className:u()({[v().fullscreenMockupWrapper]:_,[v().mockupWrapper]:!_}),children:[c&&(0,l.jsx)(p,{}),s&&(0,l.jsx)("div",{className:v().topBar,children:(0,l.jsx)("button",{className:v().button,onClick:()=>C(e=>!e),children:_?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j,{})," Exit Fullscreen"]}):(0,l.jsx)(k,{})})}),s&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(N,{isInteractive:_,imageUrl:s,modelUrl:"".concat("https://apparels.kalkinso.com").concat("","/cases/3d-mockup-editor/").concat(H.assetsFolderName,"/").concat((null==H?void 0:H.fileName)?H.fileName:"scene.gltf"),baseColorTextureIndex:H.baseColorTextureIndex,cameraOrbit:H.cameraOrbit})})]})}),(0,l.jsx)("div",{className:"cesdkWrapperStyle",children:(0,l.jsx)(S,{className:"cesdkStyle",config:D,configure:P,onInstanceChange:r})})]})]})}},116:function(e){e.exports={header:"CaseComponent_header__PDNrD",previewImage:"CaseComponent_previewImage__uOjL2",smokeScreen:"CaseComponent_smokeScreen__c_RLZ",fullscreenMockupCenter:"CaseComponent_fullscreenMockupCenter__HfnlB",fullscreenMockupWrapper:"CaseComponent_fullscreenMockupWrapper__iB074",modal:"CaseComponent_modal__9nTdk",button:"CaseComponent_button__V9gsW","button--primary":"CaseComponent_button--primary__T0dEy","button--solid":"CaseComponent_button--solid__m6OSm",topBar:"CaseComponent_topBar__f9afu",mockupWrapper:"CaseComponent_mockupWrapper__1g7Q5",cesdk:"CaseComponent_cesdk__7aJ0I",cesdkWrapper:"CaseComponent_cesdkWrapper__l1jOi",productsWrapper:"CaseComponent_productsWrapper__vIePa",outerWrapper:"CaseComponent_outerWrapper__ttLB1",wrapper:"CaseComponent_wrapper___u_ji"}},5854:function(e){e.exports={spinner:"LoadingSpinner_spinner__CFYJL",rotation:"LoadingSpinner_rotation__52mmD"}},7354:function(e){e.exports={wrapper:"SegmentedControl_wrapper__gUfGY",description:"SegmentedControl_description__wsOex",labelWrapper:"SegmentedControl_labelWrapper__4Quvn","labelWrapper--sm":"SegmentedControl_labelWrapper--sm__nypHY","labelWrapper--md":"SegmentedControl_labelWrapper--md__84TnW",labelWrapperActive:"SegmentedControl_labelWrapperActive__nCSBT",label:"SegmentedControl_label__bumNn",input:"SegmentedControl_input__9LxaY",optionWrapper:"SegmentedControl_optionWrapper__rUQsH"}}},function(e){e.O(0,[768,534,890,141,74,971,23,744],function(){return e(e.s=6968)}),_N_E=e.O()}]);